<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <title>Reve Studio</title>

    <script>
      ;(function () {
        const theme = localStorage.getItem("theme") || "light"
        let finalTheme = theme

        if (theme === "auto") {
          finalTheme = window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light"
        }

        if (finalTheme !== "dark" && finalTheme !== "light") {
          finalTheme = "light"
        }

        const backgrounds = {
          light: "#EACEBC",
          dark: "#090c21",
        }

        document.documentElement.setAttribute("data-theme", finalTheme)
        document.documentElement.style.background = backgrounds[finalTheme]

        const preloadLight = document.getElementById("preload-light")
        const preloadDark = document.getElementById("preload-dark")

        if (finalTheme === "light" && preloadDark) {
          preloadDark.remove()
        } else if (finalTheme === "dark" && preloadLight) {
          preloadLight.remove()
        }
      })()
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Cloudflare Web Analytics -->
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js"
      data-cf-beacon='{"token": "a73a6ccb8acb4ab38b7985a3ac9f27e6"}'
    ></script>
    <!-- End Cloudflare Web Analytics -->
  </body>
</html>
